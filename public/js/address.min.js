let MeestAddress=function(t){let s=t.inputContainer||"tr",i=t.separateContainer||!1,d=t.deliveryType?{block:t.deliveryType.block,branch:t.deliveryType.branch,address:t.deliveryType.address}:null,a={code:t.country.code,id:t.country.id,text:t.country.text},l={text:t.region.text},o={id:t.city.id,text:t.city.text},r={id:t.street.id,text:t.street.text},c=t.building,n=t.flat,h={container:t.postcode.container,text:t.postcode.text},x=t.branch?{id:t.branch.id,text:t.branch.text}:null;return{initCountry:function(t){return t.select2({ajax:{type:"POST",url:meest.ajaxUrl,dataType:"json",data:t=>({action:meest.actions.get_country,text:t.term}),processResults:t=>({results:t.map(t=>({id:t.id,text:t.text,code:t.code}))})}})},initCity:function(t,e){if(e.val()===meest.country_id.ua)return t.select2({ajax:{type:"POST",url:meest.ajaxUrl,dataType:"json",data:t=>({action:meest.actions.get_city,country:e.val(),text:t.term}),processResults:t=>({results:t.map(t=>({id:t.id,text:t.text,region:t.region,city:t.city}))})}})},initStreet:function(t,e,s){if(s.val()===meest.country_id.ua)return t.select2({ajax:{type:"POST",url:meest.ajaxUrl,dataType:"json",data:t=>({action:meest.actions.get_street,city:e.val(),text:t.term}),processResults:t=>({results:t.map(t=>({id:t.id,text:t.text}))})}})},initBranch:function(t,e){return t.select2({ajax:{type:"POST",url:meest.ajaxUrl,dataType:"json",data:t=>({action:meest.actions.get_branch,city:e.val(),text:t.term}),processResults:t=>({results:t.map(t=>({id:t.id,text:t.text,description:t.description}))})},templateResult:function(t){return jQuery("<strong>"+t.text+"</strong>"+(t.description?"<div><small>"+t.description+"</small</div>":""))}})},init:function(){let e=this;d&&d.block.change(function(){"branch"===this.value?(x.id.removeAttr("disabled").closest(s).show(),r.id.closest(s).hide(),c.closest(s).hide(),n.closest(s).hide(),e.initBranch(x.id,o.id).on("select2:select",t=>x.text.val(t.params.data.text))):(x.id.attr("disabled","disabled").closest(s).hide(),r.id.removeAttr("disabled").closest(s).show(),c.removeAttr("disabled").closest(s).show(),n.removeAttr("disabled").closest(s).show(),e.initStreet(r.id,o.id,a.id).on("select2:select",t=>r.text.val(t.params.data.text)))}),e.initCountry(a.id).on("select2:select",function(t){t.params&&(a.code&&a.code.val(t.params.data.code),a.text.val(t.params.data.text)),a.id.val()===meest.country_id.ua?(l.text.closest(s).hide(),d&&d.block.closest(s).show(),o.id.removeAttr("disabled").closest(s).show(),h.text.attr("disabled","disabled").closest(h.container).hide(),i?(o.text.closest(s).hide(),r.text.closest(s).hide()):(o.text.hide(),r.text.hide()),e.initCity(o.id,a.id).on("select2:select",t=>{o.text.val(t.params.data.city),r.id.empty().trigger("change"),r.text.val(""),x.id.empty().trigger("change"),x.text.val("")}),d&&d.branch.is(":checked")?(x.id.removeAttr("disabled").closest(s).show(),r.id.attr("disabled","disabled").closest(s).hide(),c.attr("disabled","disabled").closest(s).hide(),n.attr("disabled","disabled").closest(s).hide(),e.initBranch(x.id,o.id).on("select2:select",t=>x.text.val(t.params.data.text))):(x&&x.id.attr("disabled","disabled").closest(s).hide(),r.id.removeAttr("disabled").closest(s).show(),c.removeAttr("disabled").closest(s).show(),n.removeAttr("disabled").closest(s).show(),e.initStreet(r.id,o.id,a.id).on("select2:select",t=>r.text.val(t.params.data.text)))):(x&&x.id.attr("disabled","disabled").closest(s).hide(),i?(l.text.closest(s).show(),o.id.attr("disabled","disabled").closest(s).hide(),o.text.closest(s).show(),r.id.attr("disabled","disabled").closest(s).hide(),r.text.closest(s).show()):(l.text.closest(s).show(),o.id.attr("disabled","disabled").hide().next(".select2-container").hide(),o.text.show().closest(s).show(),r.id.attr("disabled","disabled").hide().next(".select2-container").hide(),r.text.show().closest(s).show()),c.removeAttr("disabled").closest(s).show(),n.removeAttr("disabled").closest(s).show(),h.text.removeAttr("disabled").closest(h.container).show(),d&&d.block.closest(s).hide(),d&&d.address.prop("checked",!0))}).trigger("select2:select")}}};